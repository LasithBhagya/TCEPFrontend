<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/style.css">
    <link rel="icon" href="img/qwits logo.png" type="image/x-icon">
    <script type="module" src="https://cdn.jsdelivr.net/npm/ldrs/dist/auto/quantum.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/ldrs/dist/auto/dotPulse.js"></script>
    <script>
      window.MathJax = {
          tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
          startup: {
              ready: () => {
                  MathJax.startup.defaultReady();
                  console.log("MathJax is ready.");
                  // now typeset() is available
                  MathJax.typeset = MathJax.typesetPromise;
              }
          }
      };
    </script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
    <title>QWits - AI powered learning assistant</title>
</head>
<body>
    <header>
        <div class="title">
            <img src="img/qwits logo.png" alt="logo">
            <h1>QWits</h1>
        </div>
        <p>An AI study assistant that instantly creates Q&As, short notes, or mind maps with a click of a button.</p>
        <div id="languageSelector">
            <label for="language">
                <span class="language langText">English</span>
                <input type="checkbox" name="language" id="language">
                <span class="language langBtn"></span>
                <span class="language langText">Sinhala</span>
            </label>
        </div>
    </header>
    <section id="userInput">
        <!-- Options -->
         <div class="button-box">
            <div id="btn"></div>
            <button type="button" class="toggle-btn" onclick="qna()"><b>Q&A</b></button>
            <div class="hr"></div>
            <button type="button" class="toggle-btn" onclick="shortnotes()"><b>Short Notes</b></button>
            <div class="hr"></div>
            <button type="button" class="toggle-btn" onclick="mindmaps()"><b>Mind Maps</b></button>
            <div class="hr"></div>
            <button type="button" class="toggle-btn" onclick="chatMode()"><b>Chat</b></button>
        </div>
        <div id="form-box" class="form-box">
            <!-- Q&A -->
            <div id="qna" class="userInputContainer active">
                <div id="gradeSelector" class="inputRow">
                    <label for="gradeqna">Grade</label>
                    <select name="grade" id="gradeqna" class="inputBox" required>
                        <option value="grade 12">Grade 12</option>
                        <option value="grade 13">Grade 13</option>
                    </select>
                </div>
                <div id="subjectSelector" class="inputRow">
                    <label for="subjectqna">Subject</label>
                    <select name="subject" id="subjectqna" class="inputBox" required>
                        <option value="Combined Mathematics">Combined Mathematics</option>
                        <option value="Physics">Physics</option>
                        <option value="ICT">ICT</option>
                        <option value="Chemistry">Chemistry</option>
                    </select>
                </div>
                <div id="difficulty" class="inputRow">
                    <label for="difficultyqna">Difficulty</label>
                    <select name="difficulty" id="difficultyqna" class="inputBox" required>
                        <option value="easy">Easy</option>
                        <option value="medium" selected>Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                </div>
                <div id="noq" class="inputRow">
                    <label for="noqqna">Number of questions</label>
                    <input type="number" name="noq" id="noqqna" class="inputBox" min="1" max="20" value="5" required>
                </div>
                <div id="syllabusSectionSelector" class="inputRow">
                    <label for="syllabusSectionqna">Syllabus Section</label>
                    <select name="syllabusSection" id="syllabusSectionqna" class="inputBox" required>
                        <option value="1st term">1<sup>st</sup> Term</option>
                        <option value="2nd term" selected>2<sup>nd</sup> Term</option>
                        <option value="3rd term">3<sup>rd</sup> Term</option>
                        <option value="1st and 2nd terms">From 1<sup>st</sup> Term to 2<sup>nd</sup></option>
                        <option value="2nd and 3rd terms">From 2<sup>nd</sup> Term to 3<sup>rd</sup></option>
                        <option value="entire">Entire year</option>
                    </select>
                </div>


                <button id="sendToAgent" type="submit" onclick={generateQnA()}>Generate</button>
            </div>
            <!-- Short notes -->
            <div id="shortnotes" class="userInputContainer">
                <div id="gradeSelector" class="inputRow">
                    <label for="gradesn">Grade</label>
                    <select name="gradesn" id="gradesn" class="inputBox" onchange="updateUnitList('SN')" required>
                        <option value="grade 12">Grade 12</option>
                        <option value="grade 13">Grade 13</option>
                    </select>
                </div>
                <div id="subjectSelector" class="inputRow">
                    <label for="subjectsn">Subject</label>
                    <select name="subjectsn" id="subjectsn" class="inputBox" onchange="updateUnitList('SN')" required>
                        <option value="Combined Mathematics">Combined Mathematics</option>
                        <option value="Physics" selected>Physics</option>
                        <option value="ICT">ICT</option>
                        <option value="Chemistry">Chemistry</option>
                    </select>
                </div>
                <div id="durationSelector" class="inputRow">
                    <label for="unitssn">Unit(s)</label>
                    <select name="unitssn" id="unitssn" class="inputBox" onchange="addTag('SN')" required></select>
                </div>
                <div id="unitSelectionSN" class="unitSelection"></div>


                <button id="sendToAgent" type="submit" onclick={generateShortNotes()}>Generate</button>
            </div>
            <!-- Mind maps -->
            <div id="mindmaps" class="userInputContainer">
                <div id="gradeSelector" class="inputRow">
                    <label for="grademm">Grade</label>
                    <select name="grademm" id="grademm" class="inputBox" onchange="updateUnitList('MM')" required>
                        <option value="grade 12">Grade 12</option>
                        <option value="grade 13">Grade 13</option>
                    </select>
                </div>
                <div id="subjectSelector" class="inputRow">
                    <label for="subjectmm">Subject</label>
                    <select name="subjectmm" id="subjectmm" class="inputBox" onchange="updateUnitList('MM')" required>
                        <option value="Combined Mathematics">Combined Mathematics</option>
                        <option value="Physics" selected>Physics</option>
                        <option value="ICT">ICT</option>
                        <option value="Chemistry">Chemistry</option>
                    </select>
                </div>
                <div id="durationSelector" class="inputRow">
                    <label for="unitsmm">Unit(s)</label>
                    <select name="unitsmm" id="unitsmm" class="inputBox" onchange="addTag('MM')" required> </select>
                </div>
                <div id="unitSelectionMM" class="unitSelection"></div>


                <button id="sendToAgent" type="submit" onclick={generateMindMaps()}>Generate</button>
            </div>
        </div>
    </section>

    <div style="display: flex; justify-content: center;">
        <div id="loadingAnim">
            <!-- <l-quantum size="45" speed="1.75" color="white"></l-quantum> -->
            <l-dot-pulse size="50" speed="1.2" color="white" ></l-dot-pulse>
            <p>This may take a minute.</p>
        </div>
    </div>

    <section id="outputSection">
        <div id="attachFiles">
            <label for="attachPDF">Drag & Drop or Choose a file<br><img class="clipImage" src="img/attach.png" alt="attach"></label>
            <input type="file" accept=".pdf" name="attachPDF" id="attachPDF" title="Attach a PDF" onchange="attachPDF()">
            <span id="custom-text">No file chosen, yet.</span>
        </div>
        
        <div id="output" class="container"></div>

        <div id="chatInput" class="chatInput">
            <input type="text" name="chatInput" id="chatInputField" class="inputBox" placeholder="Ask aything" autofocus>
            <button type="button" id="sendbtn" title="Send" onclick="chatWithAI()"><img src="img/send.png" alt="send"></button>
        </div>

        <div id="downloadMindMap">
            <button title="Download" onclick="downloadMindMap()"><img src="img/download.png" alt="download"></button>
        </div>
    </section>

    <!-- <div id="target"></div> -->

    <!-- <footer>
        <p>&copy; 2025 <a href="https://github.com/LasithBhagya">Lasith Bhagya</a>. All rights reserved.</p>
    </footer> -->
    
    <script src="JavaScript/unitList.js"></script>
    <script src="JavaScript/script.js"></script>
</body>
</html>
